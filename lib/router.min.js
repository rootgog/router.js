var Router=function(){"use strict";class t{constructor(){return this.routes={},this}on(t,e,r=!1){return"function"==typeof t&&(e=t,t="/"),this.routes[t]={handler:e,forward:r},this}notFound(t){return this.notFound=t,this}getRouteHandler(e){"/"!==(e=e.length>1&&"/"==e[0]?e.slice(1):e)&&(e=e.replace(/\/\s*$/,""));let r=!1;for(var n in this.routes){if(e==n){if(r=!0,this.routes[n].handler instanceof t){let t=e;return this.routes[n].forward||(t=e.includes("/")?e.substring(e.indexOf("/")+1):"/"),this.routes[n].handler.getRouteHandler(t)}return this.routes[n].handler}{let s=n.replace(/\//g,"\\/");if(s=s.replace(/\*/g,"[^ ]*"),s=this.routes[n].handler instanceof t?"(^|s)"+s:"(^|s)"+s+"(s|$)",s=new RegExp(s,"g"),e.match(s)){if(r=!0,this.routes[n].handler instanceof t){let t=e;if(!this.routes[n].forward)if(e.includes("/")&&(n.match(/\//g)||[]).length!=(e.match(/\//g)||[]).length){t=e.substring(e.indexOf("/")+1);for(let e=0;e<(n.match(/\//g)||[]).length;e++)t=t.substring(t.indexOf("/")+1)}else t="/";return this.routes[n].handler.getRouteHandler(t)}return this.routes[n].handler}}}if(!r)return!1}resolve({path:t=window.location.pathname,url:e,seturl:r=!0}={}){var n=this.getRouteHandler(t);return"function"==typeof n?(r&&(e||(e=t),this.setURL(e)),n()):"function"==typeof this.notFound&&this.notFound(),this}sendTo({path:t=window.location.pathname,url:e}={}){return this.resolve({path:t,url:e}),this}setURL(t){let e=document.getElementsByTagName("base")[0].getAttribute("href")?document.getElementsByTagName("base")[0].getAttribute("href"):"";return e="/"==e[0]?e.slice(1):e,t="/"==t[0]?t.slice(1):t,history.pushState(null,null,"/"+e+"/"+t),this}}return t}();
